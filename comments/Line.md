Line.tsx

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Line` –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–µ—Ç–∫—É –ª–∏–Ω–∏–π, –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏—Ö –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –ø–æ X –∏ Y –æ—Å—è–º. –≠—Ç–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, —Å–µ—Ç–æ—á–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏ –ø–æ–ª—è –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–æ–π —Å–µ—Ç–∫–∏ –≤ 3D-—Å—Ü–µ–Ω–µ.

---

### üîç **–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞**

```tsx
import { useRef } from 'react'
import * as THREE from 'three'
import { fieldCONFIG } from '../config/fieldConfig'

export const Line = () => {
  const { fieldSIZE: fieldSize } = fieldCONFIG
  const axesY: number[][] = [] // –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
  const Y_points: THREE.Vector3[][] = []
  const X_points: THREE.Vector3[][] = []

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö –ª–∏–Ω–∏–π
  for (let i = 0; i < fieldSize; i++) {
    Y_points.push([
      new THREE.Vector3(-15 + i, -15, 0.05),
      new THREE.Vector3(-15 + i, 15, 0.05),
    ])
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ª–∏–Ω–∏–π
  for (let i = 0; i < fieldSize; i++) {
    X_points.push([
      new THREE.Vector3(-15, -15 + i, 0.05),
      new THREE.Vector3(15, -15 + i, 0.05),
    ])
  }

  const points: THREE.Vector3[][] = X_points.concat(Y_points)
  const lineRef = useRef<THREE.Line>(null)

  return (
    <group position={[0, 0, 0]}>
      {points.map((point, index) => (
        <primitive
          key={index} // –†–∞–Ω—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å Math.random() ‚Äî —ç—Ç–æ **–æ—à–∏–±–∫–∞**
          object={
            new THREE.Line(
              new THREE.BufferGeometry().setFromPoints(point),
              new THREE.LineBasicMaterial({
                color: '#ff0000',
                linewidth: 1, // –í WebGL linewidth —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ Firefox –∏ –Ω–µ –≤–µ–∑–¥–µ ‚Äî –ª—É—á—à–µ –æ—Å—Ç–∞–≤–∏—Ç—å 1
                linecap: 'round',
                linejoin: 'round',
              })
            )
          }
          ref={lineRef}
        />
      ))}
    </group>
  )
}
```

---

### ‚úÖ **–ü–ª—é—Å—ã**

- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–∏–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ `fieldSize`** ‚Äî –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫ –ª—é–±–æ–º—É —Ä–∞–∑–º–µ—Ä—É –ø–æ–ª—è.
    
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ `Vector3` –æ–±—ä–µ–∫—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é** ‚Äî –¥–∞—ë—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏.
    
- ‚úÖ **–ü–æ–ª–µ–∑–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏–ª–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ç–∫–∏.**
    

---

### ‚ö†Ô∏è **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

1. **‚ùå `key={Math.random() * index}` ‚Äî –æ—à–∏–±–∫–∞**
    
    - –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ –∫–ª—é—á–∏ –±—É–¥—É—Ç —Ä–∞–∑–Ω—ã–µ, React –±—É–¥–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π `key={index}` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –º–∞—Å—Å–∏–≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π.
        
2. **‚ö†Ô∏è –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `new THREE.Line(...)` –≤ JSX –Ω–∞–ø—Ä—è–º—É—é**
    
    - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ **–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**. –¢–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –ª—É—á—à–µ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ —Å—Ü–µ–Ω—É —á–µ—Ä–µ–∑ `useEffect` –∏ `add()` –∫ `scene` –∏–ª–∏ `group`, —á—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∏ `dispose()`.
        
3. **‚ö†Ô∏è `linewidth` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –∫—Ä–æ–º–µ Firefox**
    
    - –≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ WebGL. –ï—Å–ª–∏ —Ç–µ–±–µ –≤–∞–∂–Ω–∞ —Ç–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–π ‚Äî –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `MeshLine` (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `three.meshline`).
        
4. **üì¶ –ú–Ω–æ–≥–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞:**
    
    - `axesY`, –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, `axesX`, `axes` ‚Äî —É–¥–∞–ª–∏—Ç—å –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã.
        
5. **üìà –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
    
    - –í–º–µ—Å—Ç–æ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö `Line`, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω `BufferGeometry` —Å–æ –≤—Å–µ–º–∏ –ª–∏–Ω–∏—è–º–∏ ‚Äî –±—É–¥–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
        

---

### üß† **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É: –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å —Å–µ—Ç–∫—É –ø–æ –æ—Å—è–º X –∏ Y. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–∞–∑–º–µ—Ä–∞ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ–ª—è. –û–¥–Ω–∞–∫–æ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è **—Å–æ–∑–¥–∞—ë—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ `Line` –æ–±—ä–µ–∫—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é –∏ –Ω–∞–ø—Ä—è–º—É—é –≤ JSX**, —á—Ç–æ –Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

### üîß **–û—Ü–µ–Ω–∫–∞: 7.5 / 10**

‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
‚ö† –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ React-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤  
‚ùå –û—à–∏–±–∫–∞ —Å `key`  
üí° –õ—É—á—à–µ –±—ã —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω `BufferGeometry` —Å –ª–∏–Ω–∏—è–º–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useMemo + useRef + useEffect`.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —É–ª—É—á—à–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é, –≤ –∫–æ—Ç–æ—Ä–æ–π:

- —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω `geometry` –¥–ª—è –≤—Å–µ—Ö –ª–∏–Ω–∏–π,
    
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `useMemo` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ—á–µ–∫,
    
- –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —á–∏—Å—Ç–æ—Ç–∞ JSX.