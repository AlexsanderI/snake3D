Game.tsx

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Game` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞ –∏ –ª–æ–≥–∏–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π –≤ 3D-–∏–≥—Ä–µ –Ω–∞ –±–∞–∑–µ `react-three-fiber`. –û–Ω –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Å—Ü–µ–Ω—É, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã.

–í–æ—Ç –ø–æ–¥—Ä–æ–±–Ω–∞—è **–æ—Ü–µ–Ω–∫–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ**:

---

### üîç **–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞**

```tsx
import { useEffect } from 'react'
import { Scene } from './Scene'
import renderInfo from '../engine/render/renderInfo'
import { useFrame } from '@react-three/fiber'
import setLoop from '../engine/time/setLoop'
import { useMenuStore } from '../store/menuStore'
import keyboardEvents from '../engine/events/keyboardEvents'
import { keyboardPauseEvent } from '../engine/events/pauseEvent'

export const Game = () => {
  const isVisible = useMenuStore((state) => state.isVisible)
  const titleMenu = useMenuStore((state) => state.titleMenu)

  useEffect(() => {
    renderInfo()
  }, [])

  useEffect(() => {
    document.removeEventListener('keydown', keyboardEvents)
    document.removeEventListener('keydown', keyboardPauseEvent)

    if (isVisible && titleMenu === 'Pause') {
      document.addEventListener('keydown', keyboardPauseEvent)
    } else if (!isVisible) {
      document.addEventListener('keydown', keyboardEvents)
    }

    return () => {
      document.removeEventListener('keydown', keyboardEvents)
      document.removeEventListener('keydown', keyboardPauseEvent)
    }
  }, [isVisible, titleMenu])

  useFrame((_, delta) => setLoop(delta))

  return <Scene />
}
```

---

### ‚úÖ **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**

1. **`renderInfo()`** (–æ–¥–∏–Ω —Ä–∞–∑):
    
    - –í–µ—Ä–æ—è—Ç–Ω–æ, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–ª–∏ –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ (FPS, draw calls –∏ –ø—Ä.).
        
2. **–°–ª—É—à–∞—Ç–µ–ª–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:**
    
    - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª–∏:
        
        - –ï—Å–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –º–µ–Ω—é –∏ –µ–≥–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `'Pause'` ‚Äî –≤–∫–ª—é—á–∞–µ—Ç—Å—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—É–∑–æ–π.
            
        - –ï—Å–ª–∏ –º–µ–Ω—é —Å–∫—Ä—ã—Ç–æ ‚Äî –≤–∫–ª—é—á–∞–µ—Ç—Å—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º.
            
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `useEffect` —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ `isVisible` –∏ `titleMenu`.
        
3. **`useFrame()` ‚Äî –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª:**
    
    - `setLoop(delta)` ‚Äî –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä –ø–µ—Ä–µ–¥–∞—ë—Ç `delta` –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–≤–∏–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤, –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ —Ç.–ø.).
        
4. **–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–≤–æ–π —Å—Ü–µ–Ω—ã:**
    
    - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `<Scene />` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∏–∑—É–∞–ª—å–Ω—É—é —á–∞—Å—Ç—å.
        

---

### ‚úÖ **–ü–ª—é—Å—ã**

- üëç **–•–æ—Ä–æ—à–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –ª–æ–≥–∏–∫–∏:**
    
    - –û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ü–µ–Ω–∞, –æ—Ç–¥–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–≤–æ–¥–∞, –≤—Ä–µ–º–µ–Ω–∏, –º–µ–Ω—é ‚Äî —á–∏—Ç–∞–µ–º–æ –∏ —É–¥–æ–±–Ω–æ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.
        
- üëç **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ—á–∏—Å—Ç–∫–∞ `eventListeners`:**
    
    - –í—Å–µ —Å–æ–±—ã—Ç–∏—è —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ ‚Äî –Ω–µ—Ç —É—Ç–µ—á–µ–∫.
        
- üëç **–ì–∏–±–∫–æ—Å—Ç—å –≤–≤–æ–¥–∞:**
    
    - –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–Ω—é, –∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–µ–≥–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –Ω—É–∂–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.
        
- üëç **–†–∞–±–æ—Ç–∞ —Å –∏–≥—Ä–æ–≤—ã–º –≤—Ä–µ–º–µ–Ω–µ–º —á–µ—Ä–µ–∑ `useFrame`** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –≤ R3F.
    

---

### ‚ö†Ô∏è **–ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å**

1. **–£–ª—É—á—à–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –±–ª–æ–∫–∞ —Å –∫–ª–∞–≤–∏—à–∞–º–∏:**
    
    - –°–µ–π—á–∞—Å `useEffect` –∏ –≤ `addEventListener`, –∏ –≤ `removeEventListener` –¥–≤–∞–∂–¥—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –≤—ã–∑–æ–≤—ã.
        
    - –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤–µ–¥–µ–Ω–æ –∫ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –∏ —á–∏—Å—Ç–æ–º—É –≤–∏–¥—É:
        
    
    ```tsx
    useEffect(() => {
      const handler = isVisible && titleMenu === 'Pause'
        ? keyboardPauseEvent
        : keyboardEvents
    
      document.addEventListener('keydown', handler)
    
      return () => {
        document.removeEventListener('keydown', handler)
      }
    }, [isVisible, titleMenu])
    ```
    
    –≠—Ç–æ —É–ø—Ä–æ—Å—Ç–∏—Ç –ª–æ–≥–∏–∫—É –∏ –∏—Å–∫–ª—é—á–∏—Ç –ª–∏—à–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è.
    
2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è `useMenuStore`:**
    
    - –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ `useMenuStore` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Zustand-—Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å JSDoc –∏–ª–∏ —Ç–∏–ø—ã –ø—Ä—è–º–æ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ (—á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `state.isVisible` –∏ `state.titleMenu` ‚Äî —Å—Ç—Ä–æ–∫–∞? –±—É–ª–µ–≤—ã–π?).
        
3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
    
    - –ï—Å–ª–∏ —Å—Ü–µ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—è–∂—ë–ª–æ–π, –∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚Äî –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `Suspense` –∏–ª–∏ –ª–µ–Ω–∏–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
        

---

### üß† **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Game` –≥—Ä–∞–º–æ—Ç–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥, –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –º–µ–Ω—é. –ö–æ–¥ –ª–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º.

---

### üîß **–û—Ü–µ–Ω–∫–∞: 9.6 / 10**

‚Äî –æ—Ç–ª–∏—á–Ω—ã–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥. –ú–æ–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ —É–ª—É—á—à–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –ª–æ–≥–∏–∫–∏ —Å `addEventListener` –∏ —É–º–µ–Ω—å—à–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ.

–•–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —É–ª—É—á—à–µ–Ω–Ω—ã–π, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏.