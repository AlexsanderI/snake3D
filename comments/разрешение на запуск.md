/**
 * @module interruptGameEvent.ts
 * Управляет событием окончания игры (победа или поражение)
 * и определяет, разрешено ли продолжать игровой процесс.
 *
 * Экспортируемые функции:
 *  - interruptGameEvent(): проверяет, завершена ли игра
 *  - setNewGame(): сбрасывает состояние прерывания (новая игра)
 *  - getInterruptGame(): возвращает текущее состояние (true/false)
 *  - canStepGame(): логически разрешает следующий шаг игры (true — можно)
 */

import gameOverEvent from "./gameOverEvent";
import levelCompleteEvent from "./levelCompleteEvent";

/**
 * Флаг, отражающий текущее состояние игры:
 * - true: игра завершена (поражение или победа)
 * - false: игра продолжается
 */
let isInterrupt = false;

/**
 * Проверяет, завершена ли игра.
 * Если игра окончена (по любому из событий), устанавливает флаг isInterrupt в true.
 * Используется, например, внутри игрового цикла.
 */
export function interruptGameEvent(): void {
  isInterrupt = gameOverEvent() || levelCompleteEvent();
}

/**
 * Сброс флага окончания игры.
 * Вызывается при старте новой игры.
 */
export function setNewGame(): void {
  isInterrupt = false;
}

/**
 * Возвращает текущее состояние окончания игры.
 * @returns true — если игра завершена, false — если можно продолжать
 */
export function getInterruptGame(): boolean {
  return isInterrupt;
}

/**
 * Возвращает логическое разрешение на выполнение следующего игрового шага.
 * Более читаемый аналог `!getInterruptGame()`.
 * @returns true — если можно выполнять игровой шаг, false — если шаги блокируются
 */
export function canStepGame(): boolean {
  return !isInterrupt;
}
